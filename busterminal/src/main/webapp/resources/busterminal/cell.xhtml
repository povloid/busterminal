<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:cc="http://java.sun.com/jsf/composite"
	xmlns:p="http://primefaces.org/ui">
<cc:interface>

	<cc:attribute name="cell" type="java.lang.Object" required="true" />
	<cc:attribute name="selectedCell" type="java.lang.Object"
		required="true" />

	<cc:attribute name="add_to_cell_action"
		method-signature="java.lang.String action()" />
	<cc:attribute name="edit_in_cell_action"
		method-signature="java.lang.String action()" />
	<cc:attribute name="del_from_cell_action"
		method-signature="java.lang.String action()" />


	<cc:attribute name="show_view_button"></cc:attribute>
	<cc:attribute name="view_button_oncomplete" default=""></cc:attribute>

</cc:interface>
<cc:implementation>
	<table style="width: 128px; height: 20px; border-spacing: 0px;"
		border="0">
		<tr>
			<td valign="top"><b><h:outputText
						value="#{cc.attrs.cell.index}" /></b> <h:outputText
					value=" - x=#{cc.attrs.cell.x} y=#{cc.attrs.cell.y}" /></td>
		</tr>
	</table>
	<table
		style="width: 128px; height: 112px; border-spacing: 0px; border-radius: 20px; background-image: url(#{request.contextPath}#{cc.attrs.cell.icon}); background-repeat: no-repeat"
		border="0">
		<tr>
			<td valign="top" align="left"><p:commandButton
					rendered="#{cc.attrs.cell.seat == null}" icon="ui-icon add"
					ajax="false" action="#{cc.attrs.add_to_cell_action}"
					title="Добавить посадочное место в ячейку">

					<f:setPropertyActionListener value="#{cc.attrs.cell}"
						target="#{cc.attrs.selectedCell}" />
				</p:commandButton> <p:commandButton rendered="#{cc.attrs.cell.seat != null}"
					icon="ui-icon edit" ajax="false"
					action="#{cc.attrs.edit_in_cell_action}"
					title="Редактировать посадочное место в ячейку">
					<f:setPropertyActionListener value="#{cc.attrs.cell}"
						target="#{cc.attrs.selectedCell}" />
				</p:commandButton> <p:commandButton rendered="#{cc.attrs.cell.seat != null}"
					icon="ui-icon del" ajax="false"
					action="#{cc.attrs.del_from_cell_action}"
					title="Удалить посадочное место в ячейку">
					<f:setPropertyActionListener value="#{cc.attrs.cell}"
						target="#{cc.attrs.selectedCell}" />
				</p:commandButton> <p:commandButton update="@form"
					rendered="#{!empty cc.attrs.show_view_button and cc.attrs.show_view_button == 'true' and cc.attrs.cell.seat != null}"
					oncomplete="#{cc.attrs.view_button_oncomplete}"
					icon="ui-icon ui-icon-search" title="View row">
					<f:setPropertyActionListener value="#{cc.attrs.cell}"
						target="#{cc.attrs.selectedCell}" />
				</p:commandButton></td>
		</tr>
		<tr>

			<td valign="middle" height="100%"><h:panelGroup
					rendered="#{cc.attrs.cell.seat != null and cc.attrs.cell.seat.seatType.sold}">
					<table width="100%">
						<tr>
							<td colspan="2" align="center"
								style="background: #333; border: 1px solid #333; opacity: 0.5; filter: alpha(Opacity =       50);"><b><h:outputText
									value="#{cc.attrs.cell.seat.num}"
									style="font-size: 20px; color: white; "></h:outputText></b></td>
						</tr>
						<tr>
							<td width="10px"
								style="background: #222; border: 1px solid #333; opacity: 0.8; filter: alpha(Opacity =       80);">
							<h:outputText value="Мастер процент:"	style="font-size: 10px; ; color: #00FFFF"></h:outputText>	
								</td>
							<td align="right"
								style="background: #222; border: 1px solid #333; opacity: 0.8; filter: alpha(Opacity =       80);"><h:outputText
									value="#{cc.attrs.cell.seat.masterProcent}%"
									style="font-size: 12px; color: #00FFFF"></h:outputText></td>
						</tr>

						<tr>
							<td
								style="background: #111; border: 1px solid #333; opacity: 0.8; filter: alpha(Opacity =       80);">
								<h:outputText value="Цена:"	style="font-size: 10px; ; color: yellow"></h:outputText>
								</td>
							<td align="right"
								style="background: #111; border: 1px solid #333; opacity: 0.8; filter: alpha(Opacity =       80);"><h:outputText
									value="#{cc.attrs.cell.seat.price}"
									style="font-size: 14px; color: yellow"></h:outputText></td>
						</tr>
					</table>
				</h:panelGroup></td>
		</tr>
	</table>



</cc:implementation>
</html>
